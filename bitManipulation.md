# bit operation

## 主要内容

符号    描述    运算规则
&       与      两个都为1，结果为1
｜      或      两个都为0，结果为0
^       亦或    两个相同为0，不同为1
~       取反    0变1，1变0
<<      左移    左移若干位，高位丢弃，低位补0
>>      右移    右移若干位，对于无符号数：高位补0，有符号位，编译器处理方法不一样，有的补符号位（算术右移），有的补0（逻辑有移）。

## 异或

相同为0，不同为1。也可以用“不进位加法”来理解。异或的特点：

```cpp
x ^ 0 = x
x ^ 1s = ~x // 1s = ~0
x ^ (~x) = 1s
x ^ x = 0 // interesting and important
a ^ b = c => a ^ c = b, b ^ c = a //swap
a ^ b ^ c = a ^ (b ^ c) = (a ^ b) ^ c // associative
```

## 实战常用的位运算操作

- `x & 1 == 1` or `x & 1 == 0` // 来判断奇偶 (x % 2 == 1)
- `x = x & (x - 1)` // 清零最低位的1
- `x & -x` // 得到最低位的1

## 更为复杂的位运算操作

1. 将 x 最右边的 n 位清零 `x & (~0 << n)`
2. 获取 x 的第 n 位的值(0或者1) `(x >> n) & 1`
3. 获取 x 的第 n 位的幂值 `x & (1 << (n - 1))`
4. 仅将第 n 位置为 0 `x | (1 << n)`
5. 仅将第 n 位置为 1 `x & (~(1 << n))`
6. 将 x 最高位至第 n 位(含)清零 `x & ((1 << n) - 1)`
7. 将第 n 位至第 0 位(含)清零 `x & (~((1 << (n + 1)) - 1))`

